---
// 1. Importamos las utilidades de traducciÃ³n
import { useTranslations } from '../../i18n/utils';

// 2. Importamos el OBJETO que contiene AMBOS idiomas
import allProjects from '../../data/projects.js';

// 3. Importamos el componente de la tarjeta
import ProjectCard from './ProjectCard.astro';

// 4. Obtenemos el idioma actual y la funciÃ³n 't'
const { currentLocale } = Astro;
const lang = currentLocale as 'es' | 'en';
const t = useTranslations(lang);

// 5. Seleccionamos el ARRAY de proyectos del idioma correcto
const projectsToDisplay = allProjects[lang] || allProjects.es;
---
<section id="proyectos" class="section-spacing">
  <div class="max-w-5xl mx-auto px-8">
    <h2 class="section-title text-slate-900 dark:text-slate-100">
      <span class="icon-emoji">ðŸ’¼</span>
      <!-- 6. Usamos la clave del JSON para el tÃ­tulo -->
      {t('projects.title')}
    </h2>
    <div class="grid sm:grid-cols-2 gap-6">
      <!-- 7. Mapeamos sobre el array de proyectos del idioma correcto -->
      {projectsToDisplay.map((project) => <ProjectCard {...project} />)}
    </div>
  </div>
</section>
